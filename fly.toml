# Fly.io configuration
# Deploy: flyctl deploy

app = "nfl-projections"
primary_region = "sjc"  # San Jose, CA - change to your preferred region

# Using Dockerfile instead of buildpacks
# [build]
#   builder = "paketobuildpacks/builder:base"

[env]
  PORT = "8000"
  ENVIRONMENT = "production"

[http_service]
  internal_port = 8000
  force_https = true
  auto_stop_machines = true    # Scale to 0 when idle (saves resources)
  auto_start_machines = true   # Wake up on first request
  min_machines_running = 0     # Allow scaling to 0 for maximum cost efficiency

  [[http_service.checks]]
    interval = "15s"
    timeout = "10s"
    grace_period = "30s"
    method = "GET"
    path = "/health"

[[vm]]
  cpu_kind = "shared"
  cpus = 1
  memory_mb = 256  # Free tier includes up to 3 VMs with 256MB each
